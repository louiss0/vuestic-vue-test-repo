{"version":3,"file":"VaButtonDropdown.mjs","sources":["../../../../../src/components/va-button-dropdown/VaButtonDropdown.vue"],"sourcesContent":["<template>\n  <div class=\"va-button-dropdown\" :class=\"computedClass\">\n    <va-dropdown\n      v-if=\"!$props.split\"\n      v-bind=\"vaDropdownProps\"\n      v-model=\"valueComputed\"\n      :disabled=\"$props.disabled || $props.disableDropdown\"\n    >\n      <template #anchor>\n        <va-button\n          v-bind=\"{ ...computedButtonIcons, ...buttonPropsComputed }\"\n          v-on=\"listeners\"\n          @keydown.esc.prevent=\"hideDropdown\"\n        >\n          <slot name=\"label\">\n            {{ label }}\n          </slot>\n        </va-button>\n      </template>\n\n      <slot name=\"content\">\n        <va-dropdown-content>\n          <slot />\n        </va-dropdown-content>\n      </slot>\n    </va-dropdown>\n\n    <va-button-group\n      v-else\n      :class=\"splitButtonClassComputed\"\n      v-bind=\"buttonPropsComputed\"\n    >\n      <va-button\n        v-if=\"!$props.leftIcon\"\n        :disabled=\"$props.disabled || $props.disableButton\"\n        v-bind=\"computedMainButtonProps\"\n        v-on=\"mainButtonListeners\"\n      >\n        <slot name=\"label\">\n          {{ label }}\n        </slot>\n      </va-button>\n\n      <va-dropdown\n        v-model=\"valueComputed\"\n        v-bind=\"vaDropdownProps\"\n        :disabled=\"$props.disabled || $props.disableDropdown\"\n      >\n        <template #anchor>\n          <va-button\n            :aria-label=\"t('toggleDropdown')\"\n            :disabled=\"$props.disabled || $props.disableDropdown\"\n            :icon=\"computedIcon\"\n            :icon-color=\"$props.iconColor\"\n            v-on=\"listeners\"\n            @keydown.esc.prevent=\"hideDropdown\"\n          />\n        </template>\n        <va-dropdown-content>\n          <slot />\n        </va-dropdown-content>\n      </va-dropdown>\n\n      <va-button\n        v-if=\"$props.leftIcon\"\n        :disabled=\"$props.disabled || $props.disableButton\"\n        v-bind=\"computedMainButtonProps\"\n        v-on=\"mainButtonListeners\"\n      >\n        <slot name=\"label\">\n          {{ label }}\n        </slot>\n      </va-button>\n    </va-button-group>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, computed } from 'vue'\nimport omit from 'lodash/omit.js'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nimport {\n  useBem,\n  useComponentPresetProp,\n  useStateful, useStatefulProps,\n  useEmitProxy,\n  usePlacementAliasesProps,\n  useTranslation,\n} from '../../composables'\n\nimport { VaButton } from '../va-button'\nimport { VaButtonGroup } from '../va-button-group'\nimport { VaDropdown, VaDropdownContent } from '../va-dropdown'\n\nconst { createEmits, createVOnListeners: createListeners } = useEmitProxy(['click'])\nconst { createEmits: createMainButtonEmits, createVOnListeners: createMainButtonListeners } = useEmitProxy(\n  [{ listen: 'click', emit: 'main-button-click' }],\n)\n\nconst VaButtonProps = omit(extractComponentProps(VaButton), ['iconRight', 'block'])\nconst VaDropdownProps = extractComponentProps(VaDropdown)\n\nexport default defineComponent({\n  name: 'VaButtonDropdown',\n  components: {\n    VaButton,\n    VaDropdown,\n    VaButtonGroup,\n    VaDropdownContent,\n  },\n  emits: ['update:modelValue', ...createEmits(), ...createMainButtonEmits()],\n  props: {\n    ...useComponentPresetProp,\n    ...VaButtonProps,\n    ...VaDropdownProps,\n    ...useStatefulProps,\n    ...usePlacementAliasesProps,\n    modelValue: { type: Boolean, default: false },\n    stateful: { type: Boolean, default: true },\n\n    icon: { type: String, default: 'va-arrow-down' },\n    openedIcon: { type: String, default: 'va-arrow-up' },\n    hideIcon: { type: Boolean, default: false },\n    leftIcon: { type: Boolean, default: false },\n    iconColor: { type: String, default: '' },\n\n    disabled: { type: Boolean, default: false },\n    disableButton: { type: Boolean, default: false },\n    disableDropdown: { type: Boolean, default: false },\n\n    offset: { type: [Number, Array] as PropType<number | [number, number]>, default: 2 },\n    keepAnchorWidth: { type: Boolean, default: false },\n    closeOnContentClick: { type: Boolean, default: true },\n\n    split: { type: Boolean },\n    splitTo: { type: String, default: '' },\n    splitHref: { type: String, default: '' },\n\n    loading: { type: Boolean, default: false },\n    label: { type: String },\n  },\n\n  setup (props, { emit, slots }) {\n    const { valueComputed } = useStateful(props, emit)\n\n    const computedIcon = computed(() => valueComputed.value ? props.openedIcon : props.icon)\n\n    const computedClass = useBem('va-button-dropdown', () => ({\n      split: props.split,\n    }))\n\n    const computedButtonIcons = computed(() => {\n      if (props.hideIcon) { return {} }\n\n      const propName = (props.label || slots.label) && !props.leftIcon ? 'icon-right' : 'icon'\n      return { [propName]: computedIcon.value }\n    })\n\n    const buttonPropsFiltered = computed(() => {\n      let ignoredProps = ['to', 'href', 'loading', 'icon']\n      const presetProps = [\n        'plain',\n        'textOpacity', 'backgroundOpacity',\n        'hoverOpacity', 'hoverBehavior', 'hoverOpacity',\n        'pressedOpacity', 'pressedBehavior', 'pressedOpacity',\n      ]\n\n      if (props.preset) {\n        ignoredProps = [...ignoredProps, ...presetProps]\n      }\n\n      const filteredProps = omit(VaButtonProps, ignoredProps)\n      return Object.keys(filteredProps)\n    })\n    const buttonPropsComputed = computed(\n      () => Object.entries(props)\n        .filter(([key, _]) => buttonPropsFiltered.value.includes(key))\n        .reduce((acc, [key, value]) => {\n          Object.assign(acc, { [key]: value })\n          return acc\n        }, {}),\n    )\n\n    const computedMainButtonProps = computed(() => ({\n      to: props.splitTo,\n      href: props.splitHref,\n      loading: props.loading,\n    }))\n\n    const splitButtonClassComputed = computed(() => ({ 'va-button-group__left-icon': props.leftIcon }))\n\n    const hideDropdown = () => { valueComputed.value = false }\n\n    return {\n      ...useTranslation(),\n      vaDropdownProps: filterComponentProps(VaDropdownProps),\n      hideDropdown,\n      valueComputed,\n      computedIcon,\n      computedClass,\n      computedButtonIcons,\n      buttonPropsComputed,\n      computedMainButtonProps,\n      splitButtonClassComputed,\n      listeners: createListeners(emit),\n      mainButtonListeners: createMainButtonListeners(emit),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n@import '../../styles/resources';\n\n.va-button-dropdown {\n  display: inline-block;\n  font-family: var(--va-font-family);\n  vertical-align: middle;\n\n  .va-button {\n    margin: var(--va-button-dropdown-button-margin);\n  }\n\n  &--split {\n    .va-dropdown {\n      .va-dropdown__anchor {\n        margin: var(--va-button-dropdown-button-margin);\n      }\n    }\n\n    .va-button-group__left-icon {\n      .va-dropdown {\n        .va-button {\n          border-top-right-radius: 0;\n          border-bottom-right-radius: 0;\n        }\n      }\n\n      > .va-button {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n        border-left: none;\n      }\n    }\n\n    :not(.va-button-group__left-icon) {\n      .va-dropdown {\n        .va-button {\n          border-top-left-radius: 0;\n          border-bottom-left-radius: 0;\n        }\n      }\n    }\n\n    .va-button {\n      @include keyboard-focus-outline($offset: -2px);\n    }\n  }\n}\n</style>\n"],"names":["omit","_createElementBlock","_normalizeClass","_openBlock","_createBlock","_mergeProps","_withCtx","_createVNode","_toHandlers","_withKeys","_renderSlot","_createTextVNode","_toDisplayString"],"mappings":"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"}