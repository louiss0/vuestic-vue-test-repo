{"version":3,"file":"VaAvatar.js","sources":["../../../../../src/components/va-avatar/VaAvatar.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-avatar\"\n    :style=\"computedStyle\"\n    :aria-hidden=\"!$props.src\"\n    aria-live=\"polite\"\n  >\n    <va-progress-circle\n      v-if=\"$props.loading\"\n      :size=\"sizeComputed\"\n      :color=\"colorComputed\"\n      indeterminate\n    />\n    <slot v-bind=\"avatarOptions\" v-else>\n      <img\n        v-if=\"$props.src && !hasLoadError\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"onLoadError\"\n      >\n      <slot v-else-if=\"hasLoadError && $props.src\" name=\"fallback\">\n        <va-fallback v-bind=\"VaFallbackProps\" @fallback=\"$emit('fallback')\" />\n      </slot>\n      <va-icon\n        v-else-if=\"$props.icon\"\n        :name=\"$props.icon\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, computed } from 'vue'\n\nimport {\n  useSize,\n  useColors,\n  useTextColor,\n  useSizeProps,\n  useLoadingProps,\n  useComponentPresetProp,\n} from '../../composables'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nimport { VaIcon, VaProgressCircle, VaFallback } from '../index'\nimport { useAvatarProps } from './hooks/useAvatarProps'\n\nconst VaFallbackProps = extractComponentProps(VaFallback)\n\nexport default defineComponent({\n  name: 'VaAvatar',\n\n  components: { VaIcon, VaProgressCircle, VaFallback },\n\n  props: {\n    ...useLoadingProps,\n    ...useSizeProps,\n    ...useComponentPresetProp,\n    ...useAvatarProps,\n    ...VaFallbackProps,\n\n    src: { type: String, default: null },\n    icon: { type: String, default: '' },\n    alt: { type: String, default: '' },\n  },\n\n  emits: ['error', 'fallback'],\n\n  setup (props, { emit }) {\n    const { getColor } = useColors()\n    const colorComputed = computed(() => getColor(props.color))\n    const backgroundColorComputed = computed(() => {\n      if (props.loading || (props.src && !hasLoadError.value)) {\n        return 'transparent'\n      }\n\n      return colorComputed.value\n    })\n    const { sizeComputed, fontSizeComputed } = useSize(props, 'VaAvatar')\n    const { textColorComputed } = useTextColor()\n\n    const computedStyle = computed(() => ({\n      borderRadius: props.square ? 0 : '',\n      fontSize: props.fontSize || fontSizeComputed.value,\n    }))\n\n    const hasLoadError = ref(false)\n\n    const onLoadError = (event: Event) => {\n      hasLoadError.value = true\n      emit('error', event)\n    }\n\n    watch(() => props.src, () => {\n      hasLoadError.value = false\n    })\n\n    const avatarOptions = computed(() => ({\n      hasError: hasLoadError.value,\n      onError: onLoadError,\n    }))\n\n    return {\n      hasLoadError,\n      sizeComputed,\n      avatarOptions,\n      computedStyle,\n      colorComputed,\n      textColorComputed,\n      backgroundColorComputed,\n      VaFallbackProps: filterComponentProps(VaFallbackProps),\n\n      onLoadError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-avatar {\n  align-items: var(--va-avatar-align-items);\n  display: var(--va-avatar-display);\n  justify-content: var(--va-avatar-justify-content);\n  line-height: var(--va-avatar-line-height);\n  position: var(--va-avatar-position);\n  text-align: var(--va-avatar-text-align);\n  vertical-align: var(--va-avatar-vertical-align);\n  border-radius: var(--va-avatar-border-radius);\n  font-family: var(--va-font-family);\n  background-color: v-bind(backgroundColorComputed);\n  color: v-bind(textColorComputed);\n  width: v-bind(sizeComputed);\n  min-width: v-bind(sizeComputed);  // We only define width because common use case would be flex row, for column we expect user to set appropriate styling externally.\n  height: v-bind(sizeComputed);\n\n  img,\n  svg {\n    border-radius: inherit;\n    display: inline-flex;\n    height: inherit;\n    width: inherit;\n    margin: auto;\n  }\n}\n</style>\n"],"names":["_createElementBlock","_normalizeStyle","_createBlock","_renderSlot","_normalizeProps","_mergeProps","_openBlock","_createVNode","_createCommentVNode"],"mappings":"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"}