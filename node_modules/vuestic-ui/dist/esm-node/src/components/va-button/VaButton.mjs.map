{"version":3,"file":"VaButton.mjs","sources":["../../../../../src/components/va-button/VaButton.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"tagComputed\"\n    ref=\"button\"\n    class=\"va-button\"\n    :class=\"computedClass\"\n    :style=\"computedStyle\"\n    v-bind=\"attributesComputed\"\n  >\n    <span class=\"va-button__content\" :class=\"wrapperClassComputed\">\n      <slot\n        name=\"prepend\"\n        v-bind=\"{ icon, iconAttributes: iconAttributesComputed }\"\n      >\n        <va-icon\n          v-if=\"icon\"\n          class=\"va-button__left-icon\"\n          :name=\"icon\"\n          v-bind=\"iconAttributesComputed\"\n        />\n      </slot>\n      <slot />\n      <slot\n        name=\"append\"\n        v-bind=\"{ icon: iconRight, iconAttributes: iconAttributesComputed }\"\n      >\n        <va-icon\n          v-if=\"iconRight\"\n          class=\"va-button__right-icon\"\n          :name=\"iconRight\"\n          v-bind=\"iconAttributesComputed\"\n        />\n      </slot>\n    </span>\n    <template v-if=\"loading\">\n      <slot name=\"loading\" v-bind=\"{\n        size: loaderSizeComputed,\n        color: textColorComputed,\n      }\">\n        <va-progress-circle\n          class=\"va-button__loader\"\n          :size=\"loaderSizeComputed\"\n          :color=\"textColorComputed\"\n          :thickness=\"0.15\"\n          indeterminate\n        />\n      </slot>\n      </template>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, computed, toRefs, shallowRef } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport {\n  useBem,\n  useFocus,\n  useHover, useHoverStyleProps,\n  usePressed, usePressedStyleProps,\n  useColors, useTextColor,\n  useLoadingProps,\n  useSize, useSizeProps,\n  useRouterLink, useRouterLinkProps,\n  useDeprecated,\n  useComponentPresetProp,\n  useSlotPassed,\n} from '../../composables'\n\nimport { useButtonBackground } from './hooks/useButtonBackground'\nimport { useButtonAttributes } from './hooks/useButtonAttributes'\nimport { useButtonTextColor } from './hooks/useButtonTextColor'\n\nimport { VaIcon } from '../va-icon'\nimport { VaProgressCircle } from '../va-progress-circle'\n\nexport default defineComponent({\n  name: 'VaButton',\n  components: { VaIcon, VaProgressCircle },\n  props: {\n    ...useComponentPresetProp,\n    ...useSizeProps,\n    ...useHoverStyleProps,\n    ...usePressedStyleProps,\n    ...useLoadingProps,\n    ...useRouterLinkProps,\n    tag: { type: String, default: 'button' },\n    type: { type: String, default: 'button' },\n    block: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n\n    color: { type: String, default: 'primary' },\n    textColor: { type: String, default: '' },\n    textOpacity: { type: Number, default: 1 },\n    backgroundOpacity: { type: Number, default: 1 },\n    borderColor: { type: String, default: '' },\n\n    // only for filled bg state\n    gradient: { type: Boolean, default: false },\n    plain: { type: Boolean, default: false },\n    round: { type: Boolean, default: false },\n    size: {\n      type: String as PropType<'small' | 'medium' | 'large'>,\n      default: 'medium',\n      validator: (v: string) => ['small', 'medium', 'large'].includes(v),\n    },\n\n    icon: { type: String, default: '' },\n    iconRight: { type: String, default: '' },\n    iconColor: { type: String, default: '' },\n  },\n  setup (props) {\n    // colors\n    const { getColor } = useColors()\n    const colorComputed = computed(() => getColor(props.color))\n\n    // loader size\n    const { sizeComputed } = useSize(props)\n    const loaderSizeComputed = computed(() => {\n      const size = /([0-9]*)(px)/.exec(sizeComputed.value) as null | [string, string, string]\n      return size ? `${+size[1] / 2}${size[2]}` : sizeComputed.value\n    })\n\n    // attributes\n    const { tagComputed } = useRouterLink(props)\n    const attributesComputed = useButtonAttributes(props)\n\n    // states\n    const { disabled } = toRefs(props)\n    const button = shallowRef<HTMLElement>()\n    const { focus, blur } = useFocus(button)\n    const { isHovered } = useHover(button, disabled)\n    const { isPressed } = usePressed(button)\n\n    // icon attributes\n    const iconColorComputed = computed(() => props.iconColor ? getColor(props.iconColor) : textColorComputed.value)\n    const iconAttributesComputed = computed(() => ({\n      size: props.size,\n      color: iconColorComputed.value,\n    }))\n\n    // classes\n    const wrapperClassComputed = computed(() => ({ 'va-button__content--loading': props.loading }))\n\n    const isSlotContentPassed = useSlotPassed()\n\n    const isOneIcon = computed(() => !!((props.iconRight && !props.icon) || (!props.iconRight && props.icon)))\n    const isOnlyIcon = computed(() => !isSlotContentPassed.value && isOneIcon.value)\n    const computedClass = useBem('va-button', () => ({\n      ...pick(props, ['disabled', 'block', 'loading', 'round', 'plain']),\n      small: props.size === 'small',\n      normal: !props.size || props.size === 'medium',\n      large: props.size === 'large',\n      opacity: props.textOpacity < 1,\n      bordered: !!props.borderColor,\n      iconOnly: isOnlyIcon.value,\n      leftIcon: !isOnlyIcon.value && !!props.icon && !props.iconRight,\n      rightIcon: !isOnlyIcon.value && !props.icon && !!props.iconRight,\n    }))\n\n    // styles\n    const isTransparentBg = computed(() => props.plain || props.backgroundOpacity < 0.5)\n    const { textColorComputed } = useTextColor(colorComputed, isTransparentBg)\n\n    const {\n      backgroundColor,\n      backgroundColorOpacity,\n      backgroundMaskOpacity,\n      backgroundMaskColor,\n    } = useButtonBackground(colorComputed, isPressed, isHovered)\n    const contentColorComputed = useButtonTextColor(textColorComputed, colorComputed, isPressed, isHovered)\n\n    const computedStyle = computed(() => ({\n      borderColor: props.borderColor ? getColor(props.borderColor) : 'transparent',\n      ...contentColorComputed.value,\n    }))\n\n    const publicMethods = { focus, blur }\n\n    return {\n      button,\n      tagComputed,\n      computedClass,\n      computedStyle,\n      textColorComputed,\n      loaderSizeComputed,\n      attributesComputed,\n      wrapperClassComputed,\n      iconAttributesComputed,\n\n      backgroundColor,\n      backgroundMaskColor,\n      backgroundMaskOpacity,\n      backgroundColorOpacity,\n\n      ...publicMethods,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import 'variables';\n@import '../../styles/resources';\n\n.va-button {\n  position: relative;\n  padding: var(--va-button-padding);\n  display: var(--va-button-display);\n  justify-content: var(--va-button-justify-content);\n  align-items: var(--va-button-align-items);\n  border-width: var(--va-button-border-width);\n  border-color: var(--va-button-border-color);\n  border-style: var(--va-button-border-style);\n  background-image: var(--va-button-background-image);\n  box-shadow: var(--va-button-box-shadow);\n  font-family: var(--va-font-family);\n  font-weight: var(--va-button-font-weight);\n  text-decoration: none;\n  text-transform: initial;\n  transition: var(--va-button-transition);\n  box-sizing: border-box;\n  cursor: var(--va-button-cursor);\n\n  &::after,\n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: inherit;\n  }\n\n  &::before {\n    background: v-bind(backgroundColor);\n    opacity: v-bind(backgroundColorOpacity);\n  }\n\n  &::after {\n    background-color: v-bind(backgroundMaskColor);\n    opacity: v-bind(backgroundMaskOpacity);\n  }\n\n  &__content {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    z-index: 1;\n\n    &__title,\n    &__icon {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin: auto;\n      white-space: nowrap;\n    }\n\n    &--loading {\n      opacity: 0;\n    }\n  }\n\n  &--small {\n    line-height: var(--va-button-sm-line-height);\n    border-radius: var(--va-button-sm-border-radius);\n    letter-spacing: var(--va-button-sm-letter-spacing);\n    min-height: var(--va-button-sm-size);\n    min-width: var(--va-button-sm-size);\n\n    .va-button__content {\n      font-size: var(--va-button-sm-font-size);\n      padding: var(--va-button-sm-content-py) var(--va-button-sm-content-px);\n    }\n\n    &.va-button--bordered {\n      line-height: calc(var(--va-button-sm-line-height) - 2 * var(--va-button-bordered-border));\n    }\n\n    .va-button__left-icon,\n    .va-button__right-icon {\n      // until we haven't size config for icons\n      font-size: var(--va-button-sm-line-height) !important;\n    }\n\n    .va-button__left-icon {\n      margin-right: var(--va-button-sm-icons-spacing);\n    }\n\n    .va-button__right-icon {\n      margin-left: var(--va-button-sm-icons-spacing);\n    }\n\n    &.va-button--left-icon {\n      .va-button__content {\n        padding-left: var(--va-button-sm-icon-side-padding);\n      }\n\n      .va-button__left-icon {\n        margin-right: 2px;\n      }\n    }\n\n    &.va-button--right-icon {\n      .va-button__content {\n        padding-right: var(--va-button-sm-icon-side-padding);\n      }\n\n      .va-button__right-icon {\n        margin-left: 2px;\n      }\n    }\n\n    &.va-button--icon-only {\n      .va-button__content {\n        padding-right: var(--va-button-sm-content-px);\n        padding-left: var(--va-button-sm-content-px);\n      }\n    }\n  }\n\n  &--normal {\n    line-height: var(--va-button-line-height);\n    border-radius: var(--va-button-border-radius);\n    letter-spacing: var(--va-button-letter-spacing);\n    min-height: var(--va-button-size);\n    min-width: var(--va-button-size);\n\n    .va-button__content {\n      font-size: var(--va-button-font-size);\n      padding: var(--va-button-content-py) var(--va-button-content-px);\n      line-height: var(--va-button-line-height);\n    }\n\n    &.va-button--bordered {\n      & .va-button__content {\n        line-height: calc(var(--va-button-line-height) - 2 * var(--va-button-bordered-border));\n      }\n    }\n\n    .va-button__left-icon,\n    .va-button__right-icon {\n      // until we haven't size config for icons\n      font-size: var(--va-button-line-height) !important;\n    }\n\n    .va-button__left-icon {\n      margin-right: var(--va-button-icons-spacing);\n    }\n\n    .va-button__right-icon {\n      margin-left: var(--va-button-icons-spacing);\n    }\n\n    &.va-button--left-icon {\n      .va-button__content {\n        padding-left: var(--va-button-icon-side-padding);\n      }\n\n      .va-button__left-icon {\n        margin-right: 4px;\n      }\n    }\n\n    &.va-button--right-icon {\n      .va-button__content {\n        padding-right: var(--va-button-icon-side-padding);\n      }\n\n      .va-button__right-icon {\n        margin-left: 4px;\n      }\n    }\n\n    &.va-button--icon-only {\n      .va-button__content {\n        padding-right: var(--va-button-content-px);\n        padding-left: var(--va-button-content-px);\n      }\n    }\n  }\n\n  &--large {\n    line-height: var(--va-button-lg-line-height);\n    border-radius: var(--va-button-lg-border-radius);\n    letter-spacing: var(--va-button-lg-letter-spacing);\n    min-height: var(--va-button-lg-size);\n    min-width: var(--va-button-lg-size);\n\n    .va-button__content {\n      font-size: var(--va-button-lg-font-size);\n      padding: var(--va-button-lg-content-py) var(--va-button-lg-content-px);\n    }\n\n    &.va-button--bordered {\n      line-height: calc(var(--va-button-lg-line-height) - 2 * var(--va-button-bordered-border));\n    }\n\n    .va-button__left-icon,\n    .va-button__right-icon {\n      // until we haven't size config for icons\n      font-size: var(--va-button-lg-line-height) !important;\n    }\n\n    .va-button__left-icon {\n      margin-right: var(--va-button-lg-icons-spacing);\n    }\n\n    .va-button__right-icon {\n      margin-left: var(--va-button-lg-icons-spacing);\n    }\n\n    &.va-button--left-icon {\n      .va-button__content {\n        padding-left: var(--va-button-lg-icon-side-padding);\n      }\n\n      .va-button__left-icon {\n        margin-right: 4px;\n      }\n    }\n\n    &.va-button--right-icon {\n      .va-button__content {\n        padding-right: var(--va-button-lg-icon-side-padding);\n      }\n\n      .va-button__right-icon {\n        margin-left: 4px;\n      }\n    }\n\n    &.va-button--icon-only {\n      .va-button__content {\n        padding-right: var(--va-button-lg-content-px);\n        padding-left: var(--va-button-lg-content-px);\n      }\n    }\n  }\n\n  &--plain {\n    min-width: auto;\n    min-height: auto;\n\n    & .va-button__content {\n      padding: 0;\n      z-index: unset;\n    }\n  }\n\n  &--round {\n    border-radius: 999px;\n  }\n\n  &--bordered {\n    border-width: var(--va-button-bordered-border);\n    border-style: var(--va-button-bordered-style);\n  }\n\n  &.va-button--disabled {\n    @include va-disabled;\n  }\n\n  &--icon-only {\n    .va-button__left-icon,\n    .va-button__right-icon {\n      margin-left: 0;\n      margin-right: 0;\n    }\n  }\n\n  @include keyboard-focus-outline;\n\n  &--loading {\n    pointer-events: none;\n  }\n\n  &--block {\n    display: flex;\n    min-width: 100%;\n  }\n\n  &__loader {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n</style>\n"],"names":["pick","_createBlock","_resolveDynamicComponent","_mergeProps","_withCtx","_createElementVNode","_normalizeClass","_renderSlot","_normalizeProps","_guardReactiveProps","_openBlock","_createCommentVNode","_createVNode"],"mappings":"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"}