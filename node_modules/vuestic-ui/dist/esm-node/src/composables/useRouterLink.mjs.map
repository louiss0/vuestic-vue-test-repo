{"version":3,"file":"useRouterLink.mjs","sources":["../../../../src/composables/useRouterLink.ts"],"sourcesContent":["import { computed, PropType, getCurrentInstance, ExtractPropTypes } from 'vue'\n\nexport const useRouterLinkProps = {\n  tag: { type: String, default: 'span' },\n  to: { type: [String, Object] as PropType<string | Record<string, any>>, default: '' },\n  replace: { type: Boolean, default: false },\n  append: { type: Boolean, default: false },\n  exact: { type: Boolean, default: false },\n  activeClass: { type: String, default: '' },\n  exactActiveClass: { type: String, default: '' },\n  href: { type: String, default: '' },\n  target: { type: String, default: '' },\n  disabled: { type: Boolean, default: false },\n}\n\nexport const useRouterLink = (props: ExtractPropTypes<typeof useRouterLinkProps>) => {\n  const globalProperties = computed(() => getCurrentInstance()?.appContext.config.globalProperties)\n  const isNuxt = computed(() => !!globalProperties.value?.$nuxt)\n  const vueRouter = computed(() => globalProperties.value?.$router)\n  const vueRoute = computed(() => globalProperties.value?.$route)\n\n  const tagComputed = computed(() => {\n    if (props.disabled) { return props.tag }\n\n    if (props.href && !props.to) { return 'a' }\n\n    // if (props.to) { return isNuxt.value ? 'nuxt-link' : 'router-link' }\n    // https://github.com/nuxt/framework/issues/6747\n    // TODO: may be we will be able to register NuxtLink component via @vuestic/nuxt and use resolveComponent\n    if (props.to) { return 'router-link' }\n\n    return props.tag || 'div'\n  })\n\n  const isLinkTag = computed(() => ['a', 'router-link', 'nuxt-link'].includes(tagComputed.value))\n\n  const linkAttributesComputed = computed(() => {\n    if (!isLinkTag.value) { return {} }\n\n    return tagComputed.value === 'a'\n      ? {\n        target: props.target,\n        href: hrefComputed.value,\n      }\n      : {\n        target: props.target,\n        to: props.to,\n        replace: props.replace,\n        append: props.append,\n        activeClass: props.activeClass,\n        exact: props.exact,\n        exactActiveClass: props.exactActiveClass,\n      }\n  })\n\n  const isActiveRouterLink = computed(() => {\n    if (!vueRouter.value || !props.to) { return false }\n\n    const to = vueRouter.value.resolve(props.to).href\n    const currentHref = vueRouter.value.currentRoute.value.path\n\n    return to.replace('#', '') === currentHref.replace('#', '')\n  })\n\n  const hrefComputed = computed(() => {\n    // to resolve href on server for SEO optimization\n    // https://github.com/nuxt/nuxt.js/issues/8204\n    // @ts-ignore\n    return props.href || (props.to ? vueRouter.value?.resolve(props.to, vueRoute.value).href : '')\n  })\n\n  return {\n    isLinkTag,\n    tagComputed,\n    hrefComputed,\n    isActiveRouterLink,\n    linkAttributesComputed,\n  }\n}\n"],"names":[],"mappings":";AAEO,MAAM,qBAAqB;AAAA,EAChC,KAAK,EAAE,MAAM,QAAQ,SAAS,OAAO;AAAA,EACrC,IAAI,EAAE,MAAM,CAAC,QAAQ,MAAM,GAA6C,SAAS,GAAG;AAAA,EACpF,SAAS,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,EACzC,QAAQ,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,EACxC,OAAO,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,EACvC,aAAa,EAAE,MAAM,QAAQ,SAAS,GAAG;AAAA,EACzC,kBAAkB,EAAE,MAAM,QAAQ,SAAS,GAAG;AAAA,EAC9C,MAAM,EAAE,MAAM,QAAQ,SAAS,GAAG;AAAA,EAClC,QAAQ,EAAE,MAAM,QAAQ,SAAS,GAAG;AAAA,EACpC,UAAU,EAAE,MAAM,SAAS,SAAS,MAAM;AAC5C;AAEa,MAAA,gBAAgB,CAAC,UAAuD;AACnF,QAAM,mBAAmB,SAAS,MAAM;;AAAA,oCAAsB,MAAtB,mBAAsB,WAAW,OAAO;AAAA,GAAgB;AACjF,WAAS,MAAA;;AAAM,YAAC,GAAC,sBAAiB,UAAjB,mBAAwB;AAAA,GAAK;AAC7D,QAAM,YAAY,SAAS,MAAA;;AAAM,kCAAiB,UAAjB,mBAAwB;AAAA,GAAO;AAChE,QAAM,WAAW,SAAS,MAAA;;AAAM,kCAAiB,UAAjB,mBAAwB;AAAA,GAAM;AAExD,QAAA,cAAc,SAAS,MAAM;AACjC,QAAI,MAAM,UAAU;AAAE,aAAO,MAAM;AAAA,IAAI;AAEvC,QAAI,MAAM,QAAQ,CAAC,MAAM,IAAI;AAAS,aAAA;AAAA,IAAI;AAK1C,QAAI,MAAM,IAAI;AAAS,aAAA;AAAA,IAAc;AAErC,WAAO,MAAM,OAAO;AAAA,EAAA,CACrB;AAEK,QAAA,YAAY,SAAS,MAAM,CAAC,KAAK,eAAe,WAAW,EAAE,SAAS,YAAY,KAAK,CAAC;AAExF,QAAA,yBAAyB,SAAS,MAAM;AACxC,QAAA,CAAC,UAAU,OAAO;AAAE,aAAO;IAAG;AAE3B,WAAA,YAAY,UAAU,MACzB;AAAA,MACA,QAAQ,MAAM;AAAA,MACd,MAAM,aAAa;AAAA,IAAA,IAEnB;AAAA,MACA,QAAQ,MAAM;AAAA,MACd,IAAI,MAAM;AAAA,MACV,SAAS,MAAM;AAAA,MACf,QAAQ,MAAM;AAAA,MACd,aAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MACb,kBAAkB,MAAM;AAAA,IAAA;AAAA,EAC1B,CACH;AAEK,QAAA,qBAAqB,SAAS,MAAM;AACxC,QAAI,CAAC,UAAU,SAAS,CAAC,MAAM,IAAI;AAAS,aAAA;AAAA,IAAM;AAElD,UAAM,KAAK,UAAU,MAAM,QAAQ,MAAM,EAAE,EAAE;AAC7C,UAAM,cAAc,UAAU,MAAM,aAAa,MAAM;AAEhD,WAAA,GAAG,QAAQ,KAAK,EAAE,MAAM,YAAY,QAAQ,KAAK,EAAE;AAAA,EAAA,CAC3D;AAEK,QAAA,eAAe,SAAS,MAAM;;AAIlC,WAAO,MAAM,SAAS,MAAM,MAAK,eAAU,UAAV,mBAAiB,QAAQ,MAAM,IAAI,SAAS,OAAO,OAAO;AAAA,EAAA,CAC5F;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;"}