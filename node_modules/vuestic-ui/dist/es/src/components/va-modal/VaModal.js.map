{"version":3,"file":"VaModal.js","sources":["../../../../../src/components/va-modal/VaModal.vue","../../../../../src/components/va-modal/VaModal.ts"],"sourcesContent":["<template>\n  <div\n    ref=\"rootElement\"\n    class=\"va-modal-entry\"\n    role=\"dialog\"\n    aria-modal=\"true\"\n    :aria-labelledby=\"title\"\n    :class=\"$props.anchorClass\"\n  >\n    <div v-if=\"$slots.anchor\" class=\"va-modal__anchor\">\n      <slot name=\"anchor\" v-bind=\"{ show, hide, toggle }\" />\n    </div>\n\n    <teleport :to=\"attachElement\" :disabled=\"$props.disableAttachment\">\n      <modal-element\n        name=\"va-modal\"\n        :isTransition=\"!$props.withoutTransitions\"\n        appear\n        :duration=\"300\"\n        v-bind=\"$attrs\"\n        @beforeEnter=\"onBeforeEnterTransition\"\n        @afterEnter=\"onAfterEnterTransition\"\n        @beforeLeave=\"onBeforeLeaveTransition\"\n        @afterLeave=\"onAfterLeaveTransition\"\n      >\n        <div class=\"va-modal\" v-if=\"valueComputed\">\n          <div\n            v-if=\"$props.overlay\"\n            class=\"va-modal__overlay\"\n            :style=\"computedOverlayStyles\"\n          />\n          <div\n            class=\"va-modal__container\"\n            :style=\"computedModalContainerStyle\"\n          >\n            <div\n              ref=\"modalDialog\"\n              class=\"va-modal__dialog\"\n              :class=\"computedClass\"\n              :style=\"computedDialogStyle\"\n            >\n              <va-icon\n                v-if=\"$props.fullscreen\"\n                name=\"va-close\"\n                class=\"va-modal__close\"\n                role=\"button\"\n                :aria-label=\"t('close')\"\n                tabindex=\"0\"\n                @click=\"cancel\"\n                @keydown.space=\"cancel\"\n                @keydown.enter=\"cancel\"\n              />\n              <div\n                class=\"va-modal__inner\"\n                :style=\"{ maxWidth: $props.maxWidth, maxHeight: $props.maxHeight }\"\n              >\n                <div v-if=\"$slots.content\">\n                  <slot name=\"content\" v-bind=\"{ cancel, ok }\" />\n                </div>\n                <template v-if=\"!$slots.content\">\n                  <div\n                    v-if=\"title\"\n                    class=\"va-modal__title\"\n                    :style=\"{ color: getColor('primary') }\"\n                  >\n                    {{ $props.title }}\n                  </div>\n                  <div\n                    v-if=\"$slots.header\"\n                    class=\"va-modal__header\"\n                  >\n                    <slot name=\"header\" />\n                  </div>\n                  <div\n                    v-if=\"$props.message\"\n                    class=\"va-modal__message\"\n                  >\n                    {{ $props.message }}\n                  </div>\n                  <div\n                    v-if=\"$slots.default\"\n                    class=\"va-modal__message\"\n                  >\n                    <slot />\n                  </div>\n                  <div\n                    v-if=\"($props.cancelText || $props.okText) && !$props.hideDefaultActions\"\n                    class=\"va-modal__footer\"\n                  >\n                    <va-button\n                      v-if=\"$props.cancelText\"\n                      preset=\"secondary\"\n                      color=\"secondary\"\n                      class=\"va-modal__default-cancel-button\"\n                      @click=\"cancel\"\n                    >\n                      {{ tp($props.cancelText) }}\n                    </va-button>\n                    <va-button @click=\"ok\">\n                      {{ tp($props.okText) }}\n                    </va-button>\n                  </div>\n                  <div\n                    v-if=\"$slots.footer\"\n                    class=\"va-modal__footer\"\n                  >\n                    <slot name=\"footer\" />\n                  </div>\n                </template>\n              </div>\n            </div>\n          </div>\n        </div>\n      </modal-element>\n    </teleport>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport type { PropType, StyleValue } from 'vue'\nimport {\n  Transition,\n  h,\n  defineComponent,\n  computed,\n  shallowRef,\n  toRef,\n  watchEffect,\n  onMounted,\n  nextTick, watch,\n} from 'vue'\n\nimport {\n  useStateful, useStatefulProps, useStatefulEmits,\n  useColors, useTextColor,\n  useWindow,\n  useComponentPresetProp,\n  useTrapFocus,\n  useModalLevel,\n  useTranslation,\n  useClickOutside,\n  useDocument,\n} from '../../composables'\n\nimport { VaButton } from '../va-button'\nimport { VaIcon } from '../va-icon'\n\nimport { useBlur } from './hooks/useBlur'\n\nconst ModalElement = defineComponent({\n  name: 'ModalElement',\n  inheritAttrs: false,\n  props: {\n    ...useComponentPresetProp,\n    isTransition: { type: Boolean, default: true },\n  },\n  setup: (props, { slots, attrs }) => () => props.isTransition\n    ? h(Transition, { ...attrs }, slots)\n    : slots.default?.(attrs),\n})\n\nexport default defineComponent({\n  name: 'VaModal',\n  inheritAttrs: false,\n  components: { VaButton, VaIcon, ModalElement },\n  emits: [\n    ...useStatefulEmits,\n    'cancel', 'ok', 'before-open', 'open', 'before-close', 'close', 'click-outside',\n  ],\n  props: {\n    ...useStatefulProps,\n    modelValue: { type: Boolean, default: false },\n    attachElement: { type: String, default: 'body' },\n    allowBodyScroll: { type: Boolean, default: false },\n    disableAttachment: { type: Boolean, default: false },\n    title: { type: String, default: '' },\n    message: { type: String, default: '' },\n    okText: { type: String, default: '$t:ok' },\n    cancelText: { type: String, default: '$t:cancel' },\n    hideDefaultActions: { type: Boolean, default: false },\n    fullscreen: { type: Boolean, default: false },\n    mobileFullscreen: { type: Boolean, default: true },\n    noDismiss: { type: Boolean, default: false },\n    noOutsideDismiss: { type: Boolean, default: false },\n    noEscDismiss: { type: Boolean, default: false },\n    maxWidth: { type: String, default: '' },\n    maxHeight: { type: String, default: '' },\n    anchorClass: { type: String },\n    size: {\n      type: String as PropType<'medium' | 'small' | 'large'>,\n      default: 'medium',\n      validator: (value: string) => ['medium', 'small', 'large'].includes(value),\n    },\n    fixedLayout: { type: Boolean, default: false },\n    withoutTransitions: { type: Boolean, default: false },\n    overlay: { type: Boolean, default: true },\n    overlayOpacity: { type: [Number, String], default: 0.6 },\n    blur: { type: Boolean, default: false },\n    zIndex: { type: [Number, String], default: undefined },\n    backgroundColor: { type: String, default: 'background-secondary' },\n    noPadding: { type: Boolean, default: false },\n    beforeClose: { type: Function as PropType<(hide: () => void) => any> },\n  },\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n    const modalDialog = shallowRef<HTMLElement>()\n    const { trapFocusIn, freeFocus } = useTrapFocus()\n\n    const {\n      registerModal,\n      unregisterModal,\n      isTopLevelModal,\n      isLowestLevelModal,\n    } = useModalLevel()\n\n    const { getColor } = useColors()\n    const { textColorComputed } = useTextColor(toRef(props, 'backgroundColor'))\n    const { valueComputed } = useStateful(props, emit)\n\n    const computedClass = computed(() => ({\n      'va-modal--fullscreen': props.fullscreen,\n      'va-modal--mobile-fullscreen': props.mobileFullscreen,\n      'va-modal--fixed-layout': props.fixedLayout,\n      'va-modal--no-padding': props.noPadding,\n      [`va-modal--size-${props.size}`]: props.size !== 'medium',\n    }))\n    const computedModalContainerStyle = computed(() => ({ 'z-index': props.zIndex } as StyleValue))\n    const computedDialogStyle = computed(() => ({\n      maxWidth: props.maxWidth,\n      maxHeight: props.maxHeight,\n      color: textColorComputed.value,\n      background: getColor(props.backgroundColor),\n    }))\n    const computedOverlayStyles = computed(() => {\n      // NOTE Not sure exactly what that does.\n      // Supposedly solves some case when background wasn't shown.\n      // As a side effect removes background from nested modals.\n\n      if (!props.overlay || !isLowestLevelModal.value) { return }\n\n      return {\n        'background-color': `rgba(0, 0, 0, ${props.overlayOpacity})`,\n        'z-index': props.zIndex && Number(props.zIndex) - 1,\n      } as StyleValue\n    })\n\n    const show = () => { valueComputed.value = true }\n    const hide = (cb?: () => void) => {\n      const _hide = () => {\n        valueComputed.value = false\n        cb?.()\n      }\n      props.beforeClose ? props.beforeClose(_hide) : _hide()\n    }\n    const toggle = () => { valueComputed.value = !valueComputed.value }\n    const cancel = () => { hide(() => emit('cancel')) }\n    const ok = () => { hide(() => emit('ok')) }\n    const trapFocusInModal = () => {\n      nextTick(() => { // trapFocusIn use querySelector, so need nextTick, to be sure, that DOM has been updated after modal has been opened\n        if (modalDialog.value) {\n          trapFocusIn(modalDialog.value)\n        }\n      })\n    }\n\n    const onBeforeEnterTransition = (el: HTMLElement) => emit('before-open', el)\n    const onAfterEnterTransition = (el: HTMLElement) => emit('open', el)\n    const onBeforeLeaveTransition = (el: HTMLElement) => emit('before-close', el)\n    const onAfterLeaveTransition = (el: HTMLElement) => emit('close', el)\n\n    const listenKeyUp = (e: KeyboardEvent) => {\n      const hideModal = () => {\n        if (e.code === 'Escape' && !props.noEscDismiss && !props.noDismiss && isTopLevelModal.value) {\n          cancel()\n        }\n      }\n\n      setTimeout(hideModal)\n    }\n\n    useClickOutside([modalDialog], () => {\n      if (!valueComputed.value || props.noOutsideDismiss || props.noDismiss || !isTopLevelModal.value) { return }\n\n      emit('click-outside')\n      cancel()\n    })\n\n    const window = useWindow()\n\n    watchEffect(() => {\n      if (valueComputed.value) {\n        window.value?.addEventListener('keyup', listenKeyUp)\n      } else {\n        window.value?.removeEventListener('keyup', listenKeyUp)\n      }\n    })\n\n    useBlur(toRef(props, 'blur'), valueComputed)\n\n    const documentRef = useDocument()\n    const setBodyOverflow = (overflow: string) => {\n      if (!documentRef.value || props.allowBodyScroll) { return }\n\n      documentRef.value.body.style.overflow = overflow\n    }\n\n    watch(valueComputed, newValueComputed => { // watch for open/close modal\n      if (newValueComputed) {\n        registerModal()\n        setBodyOverflow('scroll hidden')\n        return\n      }\n\n      if (isLowestLevelModal.value) {\n        freeFocus()\n        setBodyOverflow('')\n      }\n      unregisterModal()\n    })\n\n    watch(isTopLevelModal, newIsTopLevelModal => {\n      if (newIsTopLevelModal) {\n        trapFocusInModal()\n      }\n    })\n\n    onMounted(() => {\n      if (valueComputed.value) { // case when open modal with this.$vaModal.init\n        registerModal()\n      }\n    })\n\n    const publicMethods = {\n      ...useTranslation(),\n      show,\n      hide,\n      toggle,\n      cancel,\n      ok,\n      onBeforeEnterTransition,\n      onAfterEnterTransition,\n      onBeforeLeaveTransition,\n      onAfterLeaveTransition,\n      listenKeyUp,\n    }\n\n    return {\n      getColor,\n      rootElement,\n      modalDialog,\n      valueComputed,\n      computedClass,\n      computedDialogStyle,\n      computedModalContainerStyle,\n      computedOverlayStyles,\n      ...publicMethods,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-modal-overlay-background--blurred > :not(div[class*=\"va-\"]) {\n  filter: blur(var(--va-modal-overlay-background-blur-radius));\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n\n.va-modal {\n  position: var(--va-modal-position);\n  display: var(--va-modal-display);\n  align-items: var(--va-modal-align-items);\n  justify-content: var(--va-modal-justify-content);\n  width: var(--va-modal-width);\n  height: var(--va-modal-height);\n  top: var(--va-modal-top);\n  left: var(--va-modal-left);\n  overflow: var(--va-modal-overflow);\n  outline: var(--va-modal-outline);\n  z-index: var(--va-modal-z-index);\n  font-family: var(--va-font-family);\n\n  &__title {\n    margin-bottom: 1.5rem;\n\n    @include va-title();\n  }\n\n  &__container {\n    z-index: var(--va-modal-container-z-index);\n    max-width: 100%;\n  }\n\n  &-enter-from &__container,\n  &-leave-to &__container {\n    opacity: 0;\n    transform: translateY(-30%);\n  }\n\n  &-enter-active &__container,\n  &-leave-active &__container {\n    transition: opacity var(--va-modal-opacity-transition), transform var(--va-modal-transform-transition);\n  }\n\n  &__dialog {\n    min-height: var(--va-modal-dialog-min-height);\n    height: var(--va-modal-dialog-height);\n    border-radius: var(--va-modal-dialog-border-radius, var(--va-block-border-radius));\n    margin: var(--va-modal-dialog-margin);\n    box-shadow: var(--va-modal-dialog-box-shadow, var(--va-block-box-shadow));\n    max-width: var(--va-modal-dialog-max-width);\n    max-height: var(--va-modal-dialog-max-height);\n    position: var(--va-modal-dialog-position);\n    overflow: auto;\n  }\n\n  &__overlay {\n    position: var(--va-modal-overlay-position);\n    top: var(--va-modal-overlay-top);\n    left: var(--va-modal-overlay-left);\n    z-index: var(--va-modal-overlay-z-index);\n    width: var(--va-modal-overlay-width);\n    height: var(--va-modal-overlay-height);\n  }\n\n  &-enter-from &__overlay,\n  &-leave-to &__overlay {\n    opacity: 0;\n  }\n\n  &-enter-active &__overlay,\n  &-leave-active &_overlay {\n    transition: var(--va-modal-overlay-opacity-transition);\n  }\n\n  &--fullscreen {\n    min-width: 100vw !important;\n    min-height: 100vh !important;\n    border-radius: 0;\n    margin: 0;\n  }\n\n  &--mobile-fullscreen {\n    @media all and (max-width: map-get($grid-breakpoints, sm)) {\n      margin: 0 !important;\n      min-width: 100vw !important;\n      min-height: 100vh !important;\n      border-radius: 0;\n    }\n  }\n\n  &--size {\n    &-small {\n      max-width: map_get($grid-breakpoints, sm);\n\n      @media all and (max-width: map-get($grid-breakpoints, sm)) {\n        max-width: 100vw !important;\n      }\n\n      .va-modal__inner {\n        max-width: map_get($grid-breakpoints, sm);\n\n        @media all and (max-width: map-get($grid-breakpoints, sm)) {\n          max-width: 100vw !important;\n        }\n      }\n    }\n\n    &-large {\n      max-width: map-get($grid-breakpoints, lg);\n\n      .va-modal__inner {\n        max-width: map-get($grid-breakpoints, lg);\n      }\n    }\n  }\n\n  &--fixed-layout {\n    .va-modal__inner {\n      overflow: hidden;\n      padding: var(--va-modal-padding-top) 0 var(--va-modal-padding-bottom);\n      max-height: calc(100vh - 2rem);\n\n      .va-modal__header,\n      .va-modal__footer,\n      .va-modal__title {\n        padding: 0 var(--va-modal-padding-right) 0 var(--va-modal-padding-left);\n      }\n\n      .va-modal__message {\n        padding: 0 var(--va-modal-padding-right) 0 var(--va-modal-padding-left);\n        overflow: auto;\n      }\n    }\n\n    .va-modal__dialog {\n      overflow: hidden;\n    }\n  }\n\n  &--no-padding {\n    .va-modal__inner {\n      padding: 0;\n    }\n  }\n\n  &__message {\n    margin-bottom: 1.5rem;\n  }\n\n  &__inner {\n    overflow: visible;\n    display: flex;\n    position: relative;\n    flex-flow: column;\n    padding: var(--va-modal-padding);\n    max-width: map_get($grid-breakpoints, md);\n    margin: auto;\n\n    > div:last-of-type {\n      margin-bottom: 0;\n    }\n  }\n\n  &__close {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-style: normal;\n    color: var(--va-secondary);\n    z-index: 1;\n  }\n\n  &__default-cancel-button {\n    margin-right: 0.75rem;\n  }\n\n  &__footer {\n    margin-top: auto;\n    min-height: fit-content;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n  }\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport _VaModal from './VaModal.vue'\n\nexport const VaModal = withConfigTransport(_VaModal)\n"],"names":["_createElementBlock","_normalizeClass","_openBlock","_renderSlot","_normalizeProps","_guardReactiveProps","_createCommentVNode","_createBlock","_Teleport","_createVNode","_mergeProps","_normalizeStyle","_createElementVNode","_withKeys","_Fragment","_toDisplayString","_createTextVNode","_withCtx"],"mappings":"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"}